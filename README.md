# 現場監督業務監視システム

建設現場の業務管理を効率化する包括的なWebアプリケーションシステムです。

## 🚀 主要機能

### 📊 照合・検証機能
- **照合サマリー**: 案件全体の照合状況を一覧表示
- **工事注文書照合**: 発注金額と明細の自動照合
- **材料発注vs請求**: 発注データと請求書の差異チェック
- **材料見積vs発注**: 見積と発注の比較検証
- **総原価検証**: プロジェクト原価の詳細分析
- **入金照合**: 入金状況の管理と照合

### 📁 ファイル管理機能
- **ドラッグ&ドロップアップロード**: 直感的なファイル操作
- **複数ファイル同時処理**: CSV、PDF、Excel対応
- **リアルタイム処理結果**: アップロード進捗とエラー表示
- **ファイル管理**: アップロード済みファイルの一覧・ダウンロード・削除

### 🏢 マスターデータ管理
- **材料屋管理**: 材料屋マスターの登録・編集
- **請求書履歴**: 過去の請求書データの検索・表示
- **工事業者管理**: 工事業者情報の管理

### 🎨 UI/UX機能
- **レスポンシブデザイン**: PC・タブレット・スマホ対応
- **リアルタイム通知**: 成功・エラー・警告メッセージ
- **ローディング表示**: 処理状況の視覚的フィードバック
- **モーダルダイアログ**: 詳細情報の表示と入力

## 🛠️ 技術スタック

### バックエンド
- **Node.js** + **Express.js**: サーバーサイドフレームワーク
- **Microsoft Access DB**: メインデータベース（モック対応）
- **Multer**: ファイルアップロード処理
- **CSV-Parser**: CSV解析
- **PDF-Parse**: PDF解析
- **XLSX**: Excel解析

### フロントエンド
- **HTML5** + **CSS3** + **JavaScript (ES6+)**: バニラJS実装
- **Fetch API**: 非同期通信
- **CSS Grid & Flexbox**: レスポンシブレイアウト
- **CSS Animations**: スムーズなUI遷移

### セキュリティ
- **Helmet.js**: セキュリティヘッダー設定
- **CORS**: クロスオリジン制御
- **CSP**: コンテンツセキュリティポリシー

## 📦 インストール・セットアップ

### 前提条件
- Node.js (v14以上)
- npm または yarn

### インストール手順

```bash
# リポジトリのクローン
git clone https://github.com/[username]/dekiruzo-monitoring.git
cd dekiruzo-monitoring

# 依存関係のインストール
npm install

# サーバー起動
npm start
```

### アクセス
- **URL**: http://localhost:3000
- **ポート**: 3000 (デフォルト)

## 🔧 設定

### 環境変数
`config.js` ファイルで以下の設定が可能：

```javascript
module.exports = {
    // データベース設定
    database: {
        path: './database/monitoring.accdb',
        mockMode: true // 本番ではfalse
    },
    
    // サーバー設定
    server: {
        port: 3000,
        cors: true
    },
    
    // ファイルアップロード設定
    upload: {
        maxFileSize: 10 * 1024 * 1024, // 10MB
        allowedTypes: ['.csv', '.pdf', '.xlsx', '.xls']
    }
};
```

## 📋 API エンドポイント

### プロジェクト管理
- `GET /api/projects` - 案件一覧取得
- `GET /api/projects/:id` - 案件詳細取得

### ファイル管理
- `POST /api/upload-files` - ファイルアップロード
- `GET /api/uploaded-files` - アップロード済みファイル一覧
- `DELETE /api/uploaded-files/:filename` - ファイル削除
- `GET /api/uploaded-files/:filename/download` - ファイルダウンロード

### 照合機能
- `POST /api/verify-work-order/:ticketNo` - 工事注文書照合
- `POST /api/verify-all-work-orders` - 工事注文書一括照合
- `POST /api/process-supplier-file` - 材料屋ファイル処理

## 🎯 使用方法

### 1. 照合サマリーの確認
1. 「照合サマリー」タブをクリック
2. 「詳細照合実行」で最新データを取得
3. 「レポート出力」でCSVダウンロード

### 2. ファイルアップロード
1. 「材料屋請求書」タブを選択
2. ファイルをドラッグ&ドロップまたは「ファイルを選択」
3. アップロード結果を確認
4. 必要に応じてダウンロード・削除

### 3. 工事注文書照合
1. 「工事注文書照合」タブを選択
2. 照合したい伝票を選択
3. 「詳細照合実行」で差異チェック
4. 結果を確認・レポート出力

## 🐛 トラブルシューティング

### よくある問題

**Q: サーバーが起動しない**
```bash
# ポート3000が使用中の場合
netstat -ano | findstr :3000
taskkill /F /PID [PID番号]
npm start
```

**Q: ファイルアップロードが失敗する**
- ファイルサイズが10MB以下か確認
- 対応形式（CSV、PDF、Excel）か確認
- ブラウザのコンソールでエラー詳細を確認

**Q: データが表示されない**
- サーバーが正常に起動しているか確認
- ブラウザのキャッシュをクリア
- F12でネットワークタブを確認

## 📈 今後の拡張予定

- [ ] Microsoft Access DB直接接続
- [ ] ユーザー認証機能
- [ ] ダッシュボード機能拡張
- [ ] モバイルアプリ対応
- [ ] AI による自動照合機能
- [ ] クラウド対応

## 🤝 貢献

プルリクエストや Issue の報告を歓迎します。

## 📄 ライセンス

MIT License

## 📞 サポート

技術的な質問やサポートが必要な場合は、Issue を作成してください。

---

**🔥 限界を超えた現場監督業務監視システム - 完全実装版** 

Linux環境からWindows環境への移行も完了し、全機能が正常動作しています。 